{"ast":null,"code":"import _regeneratorRuntime from\"/Users/singco/dev/projects/S07P12C104/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/singco/dev/projects/S07P12C104/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect,useRef}from'react';import Button from'../../components/Common/Button/Button';import Logo from'../../assets/FitweenLogoBg.png';import{login}from'../../api/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var callKakaoLoginHandler=function callKakaoLoginHandler(){window.location.href=\"https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=\".concat(process.env.REACT_APP_KAKAO_REST_API_KEY,\"&redirect_uri=\").concat(process.env.REACT_APP_CLIENT_URI,\"/kakao\");};var onGoogleSuccess=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(googleUser){var token,body,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(googleUser.getAuthResponse().id_token);token=googleUser.getAuthResponse().id_token;body={loginType:'Google',token:token};// 서버로 id_token, 구글토큰임을 알리고\n_context.next=5;return login(body);case 5:res=_context.sent;console.log(res);// 로그인 회원가입 정하기\ncase 7:case\"end\":return _context.stop();}}},_callee);}));return function onGoogleSuccess(_x){return _ref.apply(this,arguments);};}();var onGoogleFailure=function onGoogleFailure(err){alert('구글 로그인에 실패하였습니다');console.log('err',err);};var Index=function Index(){var googleButtonRef=useRef(null);useEffect(function(){var loadScript=function loadScript(src){return new Promise(function(resolve,reject){if(document.querySelector(\"script[src=\\\"\".concat(src,\"\\\"]\")))return resolve();var script=document.createElement('script');script.src=src;script.onload=function(){return resolve();};script.onerror=function(err){return reject(err);};document.body.appendChild(script);});};var src='https://apis.google.com/js/platform.js?onload=init';loadScript(src).then(function(){/*global gapi*/gapi.load('client:auth2',function(){gapi.client.init({client_id:process.env.REACT_APP_GOOGLE_CLIENT_KEY,scope:'profile email',plugin_name:'chat'}).then(function(){var gauth=gapi.auth2.getAuthInstance();gauth.attachClickHandler(googleButtonRef.current,{ux_mode:'redirect',redirect_uri:\"\".concat(process.env.REACT_APP_CLIENT_URI,\"/oauth/redirect\")},onGoogleSuccess,onGoogleFailure);});});}).catch(console.error);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",style:{padding:'30px',width:'100%',height:'100%',position:'relative'},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:Logo,alt:\"\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"fs-17 fw-700\",children:\"\\uB108\\uC640 \\uB098\\uC758 \\uACF5\\uC720 \\uC637\\uC7A5\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"fs-47 fw-900 fc-g100\",children:\"FITWEEN\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'100px'},children:[/*#__PURE__*/_jsx(Button,{type:\"kakao\",label:\"\\uCE74\\uCE74\\uC624\\uD1A1\\uC73C\\uB85C \\uACC4\\uC18D\\uD558\\uAE30\",onClick:callKakaoLoginHandler}),/*#__PURE__*/_jsx(Button,{type:\"google\",label:\"\\uAD6C\\uAE00\\uB85C \\uACC4\\uC18D\\uD558\\uAE30\",ref:googleButtonRef})]})]});};export default Index;","map":{"version":3,"names":["React","useEffect","useRef","Button","Logo","login","callKakaoLoginHandler","window","location","href","process","env","REACT_APP_KAKAO_REST_API_KEY","REACT_APP_CLIENT_URI","onGoogleSuccess","googleUser","console","log","getAuthResponse","id_token","token","body","loginType","res","onGoogleFailure","err","alert","Index","googleButtonRef","loadScript","src","Promise","resolve","reject","document","querySelector","script","createElement","onload","onerror","appendChild","then","gapi","load","client","init","client_id","REACT_APP_GOOGLE_CLIENT_KEY","scope","plugin_name","gauth","auth2","getAuthInstance","attachClickHandler","current","ux_mode","redirect_uri","catch","error","padding","width","height","position","marginTop"],"sources":["/Users/singco/dev/projects/S07P12C104/client/src/pages/Index/Index.jsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport Button from '../../components/Common/Button/Button';\nimport Logo from '../../assets/FitweenLogoBg.png';\nimport { login } from '../../api/auth';\n\nconst callKakaoLoginHandler = () => {\n\twindow.location.href = `https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=${process.env.REACT_APP_KAKAO_REST_API_KEY}&redirect_uri=${process.env.REACT_APP_CLIENT_URI}/kakao`;\n};\n\nconst onGoogleSuccess = async googleUser => {\n\tconsole.log(googleUser.getAuthResponse().id_token);\n\tconst token = googleUser.getAuthResponse().id_token;\n\n\tconst body = {\n\t\tloginType: 'Google',\n\t\ttoken: token,\n\t};\n\n\t// 서버로 id_token, 구글토큰임을 알리고\n\tconst res = await login(body);\n\tconsole.log(res);\n\t// 로그인 회원가입 정하기\n};\n\nconst onGoogleFailure = err => {\n\talert('구글 로그인에 실패하였습니다');\n\tconsole.log('err', err);\n};\n\nconst Index = () => {\n\tconst googleButtonRef = useRef(null);\n\n\tuseEffect(() => {\n\t\tconst loadScript = src =>\n\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\tif (document.querySelector(`script[src=\"${src}\"]`)) return resolve();\n\t\t\t\tconst script = document.createElement('script');\n\t\t\t\tscript.src = src;\n\t\t\t\tscript.onload = () => resolve();\n\t\t\t\tscript.onerror = err => reject(err);\n\t\t\t\tdocument.body.appendChild(script);\n\t\t\t});\n\n\t\tconst src = 'https://apis.google.com/js/platform.js?onload=init';\n\n\t\tloadScript(src)\n\t\t\t.then(() => {\n\t\t\t\t/*global gapi*/\n\t\t\t\tgapi.load('client:auth2', () => {\n\t\t\t\t\tgapi.client\n\t\t\t\t\t\t.init({\n\t\t\t\t\t\t\tclient_id: process.env.REACT_APP_GOOGLE_CLIENT_KEY,\n\t\t\t\t\t\t\tscope: 'profile email',\n\t\t\t\t\t\t\tplugin_name: 'chat',\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tconst gauth = gapi.auth2.getAuthInstance();\n\t\t\t\t\t\t\tgauth.attachClickHandler(\n\t\t\t\t\t\t\t\tgoogleButtonRef.current,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tux_mode: 'redirect',\n\t\t\t\t\t\t\t\t\tredirect_uri: `${process.env.REACT_APP_CLIENT_URI}/oauth/redirect`,\n\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\tonGoogleSuccess,\n\t\t\t\t\t\t\t\tonGoogleFailure,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(console.error);\n\t}, []);\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"wrapper\"\n\t\t\tstyle={{\n\t\t\t\tpadding: '30px',\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%',\n\t\t\t\tposition: 'relative',\n\t\t\t}}\n\t\t>\n\t\t\t<div>\n\t\t\t\t<img src={Logo} alt=\"\" />\n\t\t\t</div>\n\t\t\t<h2 className=\"fs-17 fw-700\">너와 나의 공유 옷장</h2>\n\t\t\t<h1 className=\"fs-47 fw-900 fc-g100\">FITWEEN</h1>\n\t\t\t<div style={{ marginTop: '100px' }}>\n\t\t\t\t<Button type=\"kakao\" label=\"카카오톡으로 계속하기\" onClick={callKakaoLoginHandler} />\n\t\t\t\t<Button type=\"google\" label=\"구글로 계속하기\" ref={googleButtonRef} />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Index;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}