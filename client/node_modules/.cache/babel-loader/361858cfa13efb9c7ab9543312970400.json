{"ast":null,"code":"var _jsxFileName = \"/Users/singco/dev/projects/S07P12C104/client/src/pages/Join/JoinTown.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport axios from 'axios';\nimport Button from '../../components/Common/Button/Button';\nimport TopNavigation from '../../components/Common/TopNavigation/TopNavigation';\nimport API from '../../api';\nimport { setRefreshToken } from '../../storage/Cookie';\nimport * as authApi from '../../api/auth';\nimport { useUserDispatch } from '../../context/User/UserContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst JoinTown = _ref => {\n  _s();\n\n  let {\n    info\n  } = _ref;\n  const [location, setLocation] = useState(null);\n  const [readyState, setReadyState] = useState(false);\n  const navigate = useNavigate();\n  const dispatch = useUserDispatch();\n  const {\n    state\n  } = useLocation();\n\n  const signupHandler = async () => {\n    try {\n      const body = { ...info,\n        location: location\n      };\n      console.log(body);\n      const res = await authApi.signup(body);\n      setRefreshToken(res.refreshToken);\n      const {\n        accessToken\n      } = res;\n      dispatch({\n        type: 'LOGIN',\n        accessToken: accessToken\n      });\n      API.defaults.headers.common['Authorization'] = `Bearer ${accessToken}`;\n      navigate('/main');\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  useEffect(() => {\n    if (location) setReadyState(true);\n  }, [location]);\n\n  const getLocation = () => {\n    window.navigator.geolocation.getCurrentPosition(async data => {\n      const {\n        latitude,\n        longitude\n      } = data.coords;\n      const res = await axios.get(`https://dapi.kakao.com/v2/local/geo/coord2address.json?x=${longitude}&y=${latitude}`, // `https://dapi.kakao.com/v2/local/geo/coord2address.json?x=37.552299654649&y=126.85316458424`,\n      {\n        headers: {\n          Authorization: `KakaoAK ${process.env.REACT_APP_KAKAO_REST_API_KEY}`\n        }\n      });\n      setLocation(res.data.documents[0].address.region_1depth_name + ' ' + res.data.documents[0].address.region_2depth_name + ' ' + res.data.documents[0].address.region_3depth_name);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(TopNavigation, {\n      backClick: true,\n      onBackClick: () => {\n        navigate(-1);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      style: {\n        padding: '30px',\n        width: '100%',\n        height: '100%',\n        position: 'relative'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"fs-24 fw-700\",\n        style: {\n          textAlign: 'center',\n          paddingBottom: 30\n        },\n        children: \"\\uB0B4 \\uB3D9\\uB124 \\uB4F1\\uB85D\\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'space-around',\n          alignItems: 'center',\n          border: '2px solid black',\n          borderRadius: 21,\n          padding: 5,\n          height: '50%'\n        },\n        children: [location ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"fs-22 fw-700\",\n            style: {\n              textAlign: 'center'\n            },\n            children: \"\\uD604\\uC7AC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"fs-22 fw-700\",\n            style: {\n              textAlign: 'center'\n            },\n            children: location\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"fs-22 fw-700\",\n            style: {\n              textAlign: 'center'\n            },\n            children: \"\\uC785\\uB2C8\\uB2E4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 7\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"fs-22 fw-700\",\n          style: {\n            textAlign: 'center'\n          },\n          children: \"\\uC704\\uCE58\\uB97C \\uD655\\uC778\\uD574\\uC8FC\\uC138\\uC694\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            width: '80%'\n          },\n          type: \"outlined\",\n          label: \"\\uB0B4 \\uC704\\uCE58 \\uD655\\uC778\\uD558\\uAE30\",\n          onClick: getLocation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          position: 'absolute',\n          bottom: 0,\n          width: 'calc(100% - 60px)',\n          marginBottom: 50\n        },\n        type: readyState ? 'active' : 'disabled',\n        label: \"\\uD68C\\uC6D0\\uAC00\\uC785 \\uD558\\uAE30\" // todo : 다음단계로 info state와 넘어가야함\n        ,\n        onClick: () => signupHandler()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\n_s(JoinTown, \"yb2Bk+WiDtxvtN5Z1xBTvGQxWpU=\", false, function () {\n  return [useNavigate, useUserDispatch, useLocation];\n});\n\n_c = JoinTown;\nexport default JoinTown;\n\nvar _c;\n\n$RefreshReg$(_c, \"JoinTown\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useLocation","axios","Button","TopNavigation","API","setRefreshToken","authApi","useUserDispatch","JoinTown","info","location","setLocation","readyState","setReadyState","navigate","dispatch","state","signupHandler","body","console","log","res","signup","refreshToken","accessToken","type","defaults","headers","common","err","getLocation","window","navigator","geolocation","getCurrentPosition","data","latitude","longitude","coords","get","Authorization","process","env","REACT_APP_KAKAO_REST_API_KEY","documents","address","region_1depth_name","region_2depth_name","region_3depth_name","padding","width","height","position","textAlign","paddingBottom","display","flexDirection","justifyContent","alignItems","border","borderRadius","bottom","marginBottom"],"sources":["/Users/singco/dev/projects/S07P12C104/client/src/pages/Join/JoinTown.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport axios from 'axios';\n\nimport Button from '../../components/Common/Button/Button';\nimport TopNavigation from '../../components/Common/TopNavigation/TopNavigation';\nimport API from '../../api';\nimport { setRefreshToken } from '../../storage/Cookie';\nimport * as authApi from '../../api/auth';\nimport { useUserDispatch } from '../../context/User/UserContext';\n\nconst JoinTown = ({ info }) => {\n\tconst [location, setLocation] = useState(null);\n\tconst [readyState, setReadyState] = useState(false);\n\tconst navigate = useNavigate();\n\tconst dispatch = useUserDispatch();\n\tconst { state } = useLocation();\n\n\tconst signupHandler = async () => {\n\t\ttry {\n\t\t\tconst body = {\n\t\t\t\t...info,\n\t\t\t\tlocation: location,\n\t\t\t};\n\t\t\tconsole.log(body);\n\t\t\tconst res = await authApi.signup(body);\n\t\t\tsetRefreshToken(res.refreshToken);\n\t\t\tconst { accessToken } = res;\n\t\t\tdispatch({ type: 'LOGIN', accessToken: accessToken });\n\t\t\tAPI.defaults.headers.common['Authorization'] = `Bearer ${accessToken}`;\n\t\t\tnavigate('/main');\n\t\t} catch (err) {\n\t\t\tthrow err;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (location) setReadyState(true);\n\t}, [location]);\n\tconst getLocation = () => {\n\t\twindow.navigator.geolocation.getCurrentPosition(async data => {\n\t\t\tconst { latitude, longitude } = data.coords;\n\t\t\tconst res = await axios.get(\n\t\t\t\t`https://dapi.kakao.com/v2/local/geo/coord2address.json?x=${longitude}&y=${latitude}`,\n\t\t\t\t// `https://dapi.kakao.com/v2/local/geo/coord2address.json?x=37.552299654649&y=126.85316458424`,\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `KakaoAK ${process.env.REACT_APP_KAKAO_REST_API_KEY}`,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tsetLocation(\n\t\t\t\tres.data.documents[0].address.region_1depth_name +\n\t\t\t\t\t' ' +\n\t\t\t\t\tres.data.documents[0].address.region_2depth_name +\n\t\t\t\t\t' ' +\n\t\t\t\t\tres.data.documents[0].address.region_3depth_name,\n\t\t\t);\n\t\t});\n\t};\n\treturn (\n\t\t<>\n\t\t\t<TopNavigation\n\t\t\t\tbackClick\n\t\t\t\tonBackClick={() => {\n\t\t\t\t\tnavigate(-1);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tclassName=\"wrapper\"\n\t\t\t\tstyle={{\n\t\t\t\t\tpadding: '30px',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\theight: '100%',\n\t\t\t\t\tposition: 'relative',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<h2 className=\"fs-24 fw-700\" style={{ textAlign: 'center', paddingBottom: 30 }}>\n\t\t\t\t\t내 동네 등록하기\n\t\t\t\t</h2>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\tjustifyContent: 'space-around',\n\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\tborder: '2px solid black',\n\t\t\t\t\t\tborderRadius: 21,\n\t\t\t\t\t\tpadding: 5,\n\t\t\t\t\t\theight: '50%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{location ? (\n\t\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\n\t\t\t\t\t\t\t<span className=\"fs-22 fw-700\" style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t현재\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"fs-22 fw-700\" style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t{location}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"fs-22 fw-700\" style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t입니다\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<span className=\"fs-22 fw-700\" style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t위치를 확인해주세요\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tstyle={{ width: '80%' }}\n\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\tlabel=\"내 위치 확인하기\"\n\t\t\t\t\t\tonClick={getLocation}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<Button\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tbottom: 0,\n\t\t\t\t\t\twidth: 'calc(100% - 60px)',\n\t\t\t\t\t\tmarginBottom: 50,\n\t\t\t\t\t}}\n\t\t\t\t\ttype={readyState ? 'active' : 'disabled'}\n\t\t\t\t\tlabel=\"회원가입 하기\"\n\t\t\t\t\t// todo : 다음단계로 info state와 넘어가야함\n\t\t\t\t\tonClick={() => signupHandler()}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default JoinTown;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,kBAAzC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,MAAP,MAAmB,uCAAnB;AACA,OAAOC,aAAP,MAA0B,qDAA1B;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,SAASC,eAAT,QAAgC,sBAAhC;AACA,OAAO,KAAKC,OAAZ,MAAyB,gBAAzB;AACA,SAASC,eAAT,QAAgC,gCAAhC;;;;AAEA,MAAMC,QAAQ,GAAG,QAAc;EAAA;;EAAA,IAAb;IAAEC;EAAF,CAAa;EAC9B,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,CAAC,IAAD,CAAxC;EACA,MAAM,CAACc,UAAD,EAAaC,aAAb,IAA8Bf,QAAQ,CAAC,KAAD,CAA5C;EACA,MAAMgB,QAAQ,GAAGf,WAAW,EAA5B;EACA,MAAMgB,QAAQ,GAAGR,eAAe,EAAhC;EACA,MAAM;IAAES;EAAF,IAAYhB,WAAW,EAA7B;;EAEA,MAAMiB,aAAa,GAAG,YAAY;IACjC,IAAI;MACH,MAAMC,IAAI,GAAG,EACZ,GAAGT,IADS;QAEZC,QAAQ,EAAEA;MAFE,CAAb;MAIAS,OAAO,CAACC,GAAR,CAAYF,IAAZ;MACA,MAAMG,GAAG,GAAG,MAAMf,OAAO,CAACgB,MAAR,CAAeJ,IAAf,CAAlB;MACAb,eAAe,CAACgB,GAAG,CAACE,YAAL,CAAf;MACA,MAAM;QAAEC;MAAF,IAAkBH,GAAxB;MACAN,QAAQ,CAAC;QAAEU,IAAI,EAAE,OAAR;QAAiBD,WAAW,EAAEA;MAA9B,CAAD,CAAR;MACApB,GAAG,CAACsB,QAAJ,CAAaC,OAAb,CAAqBC,MAArB,CAA4B,eAA5B,IAAgD,UAASJ,WAAY,EAArE;MACAV,QAAQ,CAAC,OAAD,CAAR;IACA,CAZD,CAYE,OAAOe,GAAP,EAAY;MACb,MAAMA,GAAN;IACA;EACD,CAhBD;;EAkBAhC,SAAS,CAAC,MAAM;IACf,IAAIa,QAAJ,EAAcG,aAAa,CAAC,IAAD,CAAb;EACd,CAFQ,EAEN,CAACH,QAAD,CAFM,CAAT;;EAGA,MAAMoB,WAAW,GAAG,MAAM;IACzBC,MAAM,CAACC,SAAP,CAAiBC,WAAjB,CAA6BC,kBAA7B,CAAgD,MAAMC,IAAN,IAAc;MAC7D,MAAM;QAAEC,QAAF;QAAYC;MAAZ,IAA0BF,IAAI,CAACG,MAArC;MACA,MAAMjB,GAAG,GAAG,MAAMpB,KAAK,CAACsC,GAAN,CAChB,4DAA2DF,SAAU,MAAKD,QAAS,EADnE,EAEjB;MACA;QACCT,OAAO,EAAE;UACRa,aAAa,EAAG,WAAUC,OAAO,CAACC,GAAR,CAAYC,4BAA6B;QAD3D;MADV,CAHiB,CAAlB;MASAhC,WAAW,CACVU,GAAG,CAACc,IAAJ,CAASS,SAAT,CAAmB,CAAnB,EAAsBC,OAAtB,CAA8BC,kBAA9B,GACC,GADD,GAECzB,GAAG,CAACc,IAAJ,CAASS,SAAT,CAAmB,CAAnB,EAAsBC,OAAtB,CAA8BE,kBAF/B,GAGC,GAHD,GAIC1B,GAAG,CAACc,IAAJ,CAASS,SAAT,CAAmB,CAAnB,EAAsBC,OAAtB,CAA8BG,kBALrB,CAAX;IAOA,CAlBD;EAmBA,CApBD;;EAqBA,oBACC;IAAA,wBACC,QAAC,aAAD;MACC,SAAS,MADV;MAEC,WAAW,EAAE,MAAM;QAClBlC,QAAQ,CAAC,CAAC,CAAF,CAAR;MACA;IAJF;MAAA;MAAA;MAAA;IAAA,QADD,eAOC;MACC,SAAS,EAAC,SADX;MAEC,KAAK,EAAE;QACNmC,OAAO,EAAE,MADH;QAENC,KAAK,EAAE,MAFD;QAGNC,MAAM,EAAE,MAHF;QAINC,QAAQ,EAAE;MAJJ,CAFR;MAAA,wBASC;QAAI,SAAS,EAAC,cAAd;QAA6B,KAAK,EAAE;UAAEC,SAAS,EAAE,QAAb;UAAuBC,aAAa,EAAE;QAAtC,CAApC;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QATD,eAYC;QACC,KAAK,EAAE;UACNC,OAAO,EAAE,MADH;UAENC,aAAa,EAAE,QAFT;UAGNC,cAAc,EAAE,cAHV;UAINC,UAAU,EAAE,QAJN;UAKNC,MAAM,EAAE,iBALF;UAMNC,YAAY,EAAE,EANR;UAONX,OAAO,EAAE,CAPH;UAQNE,MAAM,EAAE;QARF,CADR;QAAA,WAYEzC,QAAQ,gBACR;UAAK,KAAK,EAAE;YAAE6C,OAAO,EAAE,MAAX;YAAmBC,aAAa,EAAE;UAAlC,CAAZ;UAAA,wBACC;YAAM,SAAS,EAAC,cAAhB;YAA+B,KAAK,EAAE;cAAEH,SAAS,EAAE;YAAb,CAAtC;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QADD,eAIC;YAAM,SAAS,EAAC,cAAhB;YAA+B,KAAK,EAAE;cAAEA,SAAS,EAAE;YAAb,CAAtC;YAAA,UACE3C;UADF;YAAA;YAAA;YAAA;UAAA,QAJD,eAOC;YAAM,SAAS,EAAC,cAAhB;YAA+B,KAAK,EAAE;cAAE2C,SAAS,EAAE;YAAb,CAAtC;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAPD;QAAA;UAAA;UAAA;UAAA;QAAA,QADQ,gBAaR;UAAM,SAAS,EAAC,cAAhB;UAA+B,KAAK,EAAE;YAAEA,SAAS,EAAE;UAAb,CAAtC;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAzBF,eA6BC,QAAC,MAAD;UACC,KAAK,EAAE;YAAEH,KAAK,EAAE;UAAT,CADR;UAEC,IAAI,EAAC,UAFN;UAGC,KAAK,EAAC,8CAHP;UAIC,OAAO,EAAEpB;QAJV;UAAA;UAAA;UAAA;QAAA,QA7BD;MAAA;QAAA;QAAA;QAAA;MAAA,QAZD,eAgDC,QAAC,MAAD;QACC,KAAK,EAAE;UACNsB,QAAQ,EAAE,UADJ;UAENS,MAAM,EAAE,CAFF;UAGNX,KAAK,EAAE,mBAHD;UAINY,YAAY,EAAE;QAJR,CADR;QAOC,IAAI,EAAElD,UAAU,GAAG,QAAH,GAAc,UAP/B;QAQC,KAAK,EAAC,uCARP,CASC;QATD;QAUC,OAAO,EAAE,MAAMK,aAAa;MAV7B;QAAA;QAAA;QAAA;MAAA,QAhDD;IAAA;MAAA;MAAA;MAAA;IAAA,QAPD;EAAA,gBADD;AAuEA,CAxHD;;GAAMT,Q;UAGYT,W,EACAQ,e,EACCP,W;;;KALbQ,Q;AA0HN,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}