{"ast":null,"code":"var _jsxFileName = \"/Users/singco/dev/projects/S07P12C104/client/src/pages/Join/JoinTown.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Button from '../../components/Common/Button/Button';\nimport TopNavigation from '../../components/Common/TopNavigation/TopNavigation';\nimport API from '../../api';\nimport { setRefreshToken } from '../../storage/Cookie';\nimport * as authApi from '../../api/auth';\nimport { useUserDispatch, useUserState } from '../../contexts/User/UserContext';\nimport { setLogin } from '../../contexts/User/UserTypes';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst JoinTown = _ref => {\n  _s();\n\n  let {\n    info\n  } = _ref;\n  const [location, setLocation] = useState(null);\n  const [readyState, setReadyState] = useState(false);\n  const navigate = useNavigate();\n  let {\n    loginedUserId\n  } = useUserState();\n  const dispatch = useUserDispatch();\n\n  const signupHandler = async () => {\n    try {\n      const body = { ...info,\n        userId: loginedUserId,\n        region: location\n      };\n      const res = await authApi.signup(body);\n      const {\n        userId,\n        accessToken\n      } = res.accessToken;\n      setRefreshToken(res.refreshToken);\n      API.defaults.headers.common['Authorization'] = `Bearer ${accessToken}`;\n      dispatch(setLogin(userId));\n      navigate('/main');\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  useEffect(() => {\n    if (location) setReadyState(true);\n  }, [location]);\n\n  const getLocation = () => {\n    window.navigator.geolocation.getCurrentPosition(async data => {\n      const {\n        latitude,\n        longitude\n      } = data.coords;\n      const res = await axios.get(`https://dapi.kakao.com/v2/local/geo/coord2address.json?x=${longitude}&y=${latitude}`, {\n        headers: {\n          Authorization: `KakaoAK ${process.env.REACT_APP_KAKAO_REST_API_KEY}`\n        }\n      });\n      setLocation(res.data.documents[0].address.region_1depth_name + ' ' + res.data.documents[0].address.region_2depth_name + ' ' + res.data.documents[0].address.region_3depth_name);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(TopNavigation, {\n      backClick: true,\n      onBackClick: () => {\n        navigate(-1);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      style: {\n        padding: '30px',\n        width: '100%',\n        height: '100%',\n        position: 'relative'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"fs-24 fw-700\",\n        style: {\n          textAlign: 'center',\n          paddingBottom: 30\n        },\n        children: \"\\uB0B4 \\uB3D9\\uB124 \\uB4F1\\uB85D\\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'space-around',\n          alignItems: 'center',\n          border: '2px solid black',\n          borderRadius: 21,\n          padding: 5,\n          height: '50%'\n        },\n        children: [location ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"fs-22 fw-700\",\n            style: {\n              textAlign: 'center'\n            },\n            children: \"\\uD604\\uC7AC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"fs-22 fw-700\",\n            style: {\n              textAlign: 'center'\n            },\n            children: location\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"fs-22 fw-700\",\n            style: {\n              textAlign: 'center'\n            },\n            children: \"\\uC785\\uB2C8\\uB2E4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 7\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"fs-22 fw-700\",\n          style: {\n            textAlign: 'center'\n          },\n          children: \"\\uC704\\uCE58\\uB97C \\uD655\\uC778\\uD574\\uC8FC\\uC138\\uC694\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            width: '80%'\n          },\n          type: \"outlined\",\n          label: \"\\uB0B4 \\uC704\\uCE58 \\uD655\\uC778\\uD558\\uAE30\",\n          onClick: getLocation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          position: 'absolute',\n          bottom: 0,\n          width: 'calc(100% - 60px)',\n          marginBottom: 50\n        },\n        type: readyState ? 'active' : 'disabled',\n        label: \"\\uD68C\\uC6D0\\uAC00\\uC785 \\uD558\\uAE30\",\n        onClick: () => signupHandler()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\n_s(JoinTown, \"lQKcyvJ1huQM0Nm4ntKO6cLwiFg=\", false, function () {\n  return [useNavigate, useUserState, useUserDispatch];\n});\n\n_c = JoinTown;\nexport default JoinTown;\n\nvar _c;\n\n$RefreshReg$(_c, \"JoinTown\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","axios","Button","TopNavigation","API","setRefreshToken","authApi","useUserDispatch","useUserState","setLogin","JoinTown","info","location","setLocation","readyState","setReadyState","navigate","loginedUserId","dispatch","signupHandler","body","userId","region","res","signup","accessToken","refreshToken","defaults","headers","common","err","getLocation","window","navigator","geolocation","getCurrentPosition","data","latitude","longitude","coords","get","Authorization","process","env","REACT_APP_KAKAO_REST_API_KEY","documents","address","region_1depth_name","region_2depth_name","region_3depth_name","padding","width","height","position","textAlign","paddingBottom","display","flexDirection","justifyContent","alignItems","border","borderRadius","bottom","marginBottom"],"sources":["/Users/singco/dev/projects/S07P12C104/client/src/pages/Join/JoinTown.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\nimport Button from '../../components/Common/Button/Button';\nimport TopNavigation from '../../components/Common/TopNavigation/TopNavigation';\nimport API from '../../api';\nimport { setRefreshToken } from '../../storage/Cookie';\nimport * as authApi from '../../api/auth';\nimport { useUserDispatch, useUserState } from '../../contexts/User/UserContext';\nimport { setLogin } from '../../contexts/User/UserTypes';\n\nconst JoinTown = ({ info }) => {\n\tconst [location, setLocation] = useState(null);\n\tconst [readyState, setReadyState] = useState(false);\n\tconst navigate = useNavigate();\n\tlet { loginedUserId } = useUserState();\n\tconst dispatch = useUserDispatch();\n\n\tconst signupHandler = async () => {\n\t\ttry {\n\t\t\tconst body = {\n\t\t\t\t...info,\n\t\t\t\tuserId: loginedUserId,\n\t\t\t\tregion: location,\n\t\t\t};\n\n\t\t\tconst res = await authApi.signup(body);\n\t\t\tconst { userId, accessToken } = res.accessToken;\n\n\t\t\tsetRefreshToken(res.refreshToken);\n\t\t\tAPI.defaults.headers.common['Authorization'] = `Bearer ${accessToken}`;\n\t\t\tdispatch(setLogin(userId));\n\t\t\tnavigate('/main');\n\t\t} catch (err) {\n\t\t\tthrow err;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (location) setReadyState(true);\n\t}, [location]);\n\tconst getLocation = () => {\n\t\twindow.navigator.geolocation.getCurrentPosition(async data => {\n\t\t\tconst { latitude, longitude } = data.coords;\n\t\t\tconst res = await axios.get(\n\t\t\t\t`https://dapi.kakao.com/v2/local/geo/coord2address.json?x=${longitude}&y=${latitude}`,\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `KakaoAK ${process.env.REACT_APP_KAKAO_REST_API_KEY}`,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tsetLocation(\n\t\t\t\tres.data.documents[0].address.region_1depth_name +\n\t\t\t\t\t' ' +\n\t\t\t\t\tres.data.documents[0].address.region_2depth_name +\n\t\t\t\t\t' ' +\n\t\t\t\t\tres.data.documents[0].address.region_3depth_name,\n\t\t\t);\n\t\t});\n\t};\n\treturn (\n\t\t<>\n\t\t\t<TopNavigation\n\t\t\t\tbackClick\n\t\t\t\tonBackClick={() => {\n\t\t\t\t\tnavigate(-1);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tclassName=\"wrapper\"\n\t\t\t\tstyle={{\n\t\t\t\t\tpadding: '30px',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\theight: '100%',\n\t\t\t\t\tposition: 'relative',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<h2 className=\"fs-24 fw-700\" style={{ textAlign: 'center', paddingBottom: 30 }}>\n\t\t\t\t\t내 동네 등록하기\n\t\t\t\t</h2>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\tjustifyContent: 'space-around',\n\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\tborder: '2px solid black',\n\t\t\t\t\t\tborderRadius: 21,\n\t\t\t\t\t\tpadding: 5,\n\t\t\t\t\t\theight: '50%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{location ? (\n\t\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\n\t\t\t\t\t\t\t<span className=\"fs-22 fw-700\" style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t현재\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"fs-22 fw-700\" style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t{location}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"fs-22 fw-700\" style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t입니다\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<span className=\"fs-22 fw-700\" style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t위치를 확인해주세요\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tstyle={{ width: '80%' }}\n\t\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\t\tlabel=\"내 위치 확인하기\"\n\t\t\t\t\t\tonClick={getLocation}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<Button\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tbottom: 0,\n\t\t\t\t\t\twidth: 'calc(100% - 60px)',\n\t\t\t\t\t\tmarginBottom: 50,\n\t\t\t\t\t}}\n\t\t\t\t\ttype={readyState ? 'active' : 'disabled'}\n\t\t\t\t\tlabel=\"회원가입 하기\"\n\t\t\t\t\tonClick={() => signupHandler()}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default JoinTown;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}