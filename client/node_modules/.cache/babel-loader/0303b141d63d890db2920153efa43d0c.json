{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/singco/dev/projects/S07P12C104/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _objectSpread from\"/Users/singco/dev/projects/S07P12C104/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/singco/dev/projects/S07P12C104/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/singco/dev/projects/S07P12C104/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/singco/dev/projects/S07P12C104/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import React,{useState,useEffect}from'react';/** @jsxImportSource @emotion/react */import{css}from'@emotion/react';import colors from'../../constants/colors';import Button from'../../components/Common/Button/Button';import{useNavigate}from'react-router-dom';import{getUserInfo,doFollow,cancelFollow}from'../../api/user';import{jsx as _jsx}from\"@emotion/react/jsx-runtime\";import{jsxs as _jsxs}from\"@emotion/react/jsx-runtime\";var ProfileButton=function ProfileButton(_ref){var userId=_ref.userId,isFollowed=_ref.isFollowed,setProfileInfo=_ref.setProfileInfo;var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),userid=_useState2[0],setUserid=_useState2[1];var _useState3=useState(isFollowed),_useState4=_slicedToArray(_useState3,2),followed=_useState4[0],setFollowed=_useState4[1];useEffect(function(){var fetch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getUserInfo();case 2:data=_context.sent;setUserid(data.userInfo.userId);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetch(){return _ref2.apply(this,arguments);};}();fetch();},[]);var doFollowClickHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var ret;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return doFollow();case 2:ret=_context2.sent;if(ret.result==='success'){setFollowed(!followed);setProfileInfo(function(profileInfo){return _objectSpread(_objectSpread({},profileInfo),{},{userFollowedCnt:profileInfo.userFollowedCnt+1});});}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function doFollowClickHandler(){return _ref3.apply(this,arguments);};}();var cancelFollowClickHandler=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var ret;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return cancelFollow();case 2:ret=_context3.sent;if(ret.result==='success'){setFollowed(!followed);setProfileInfo(function(profileInfo){return _objectSpread(_objectSpread({},profileInfo),{},{userFollowedCnt:profileInfo.userFollowedCnt-1});});}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function cancelFollowClickHandler(){return _ref4.apply(this,arguments);};}();return _jsxs(\"div\",{css:css(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n\\t\\t\\t\\tdisplay: flex;\\n\\t\\t\\t\\tflex-direction: row;\\n\\t\\t\\t\\tjustify-content: center;\\n\\t\\t\\t\\talign-items: center;\\n\\t\\t\\t\\tpadding: 14px;\\n\\t\\t\\t\"]))),children:[followed?_jsx(Button,{css:css(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n\\t\\t\\t\\t\\t\\tdisplay: flex;\\n\\t\\t\\t\\t\\t\\tjustify-content: center;\\n\\t\\t\\t\\t\\t\\talign-items: center;\\n\\t\\t\\t\\t\\t\\tpadding: 10px;\\n\\t\\t\\t\\t\\t\\tmargin: 10px;\\n\\t\\t\\t\\t\\t\\tborder: 2px solid \",\";\\n\\t\\t\\t\\t\\t\\tborder-radius: 14px;\\n\\t\\t\\t\\t\\t\\tbox-shadow: none;\\n\\t\\t\\t\\t\\t\"])),colors.green100),type:\"active\",label:\"FOLLOW\",onClick:doFollowClickHandler}):_jsx(Button,{css:css(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n\\t\\t\\t\\t\\t\\tdisplay: flex;\\n\\t\\t\\t\\t\\t\\tjustify-content: center;\\n\\t\\t\\t\\t\\t\\talign-items: center;\\n\\t\\t\\t\\t\\t\\tpadding: 10px;\\n\\t\\t\\t\\t\\t\\tmargin: 10px;\\n\\t\\t\\t\\t\\t\\tborder: 2px solid \",\";\\n\\t\\t\\t\\t\\t\\tborder-radius: 14px;\\n\\t\\t\\t\\t\\t\\tbox-shadow: none;\\n\\t\\t\\t\\t\\t\"])),colors.green100),type:\"outlined\",label:\"UNFOLLOW\",onClick:cancelFollowClickHandler}),_jsx(Button,{css:css(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n\\t\\t\\t\\t\\tdisplay: flex;\\n\\t\\t\\t\\t\\tjustify-content: center;\\n\\t\\t\\t\\t\\talign-items: center;\\n\\t\\t\\t\\t\\tpadding: 10px;\\n\\t\\t\\t\\t\\tmargin: 10px;\\n\\t\\t\\t\\t\\tborder: 2px solid \",\";\\n\\t\\t\\t\\t\\tborder-radius: 14px;\\n\\t\\t\\t\\t\\tbox-shadow: none;\\n\\t\\t\\t\\t\"])),colors.green100),type:\"outlined\",label:\"CHAT\",onClick:function onClick(){return navigate('/chat/room',{state:{roomId:null,receiverId:userId}});}})]});};export default ProfileButton;","map":{"version":3,"names":["React","useState","useEffect","css","colors","Button","useNavigate","getUserInfo","doFollow","cancelFollow","ProfileButton","userId","isFollowed","setProfileInfo","navigate","userid","setUserid","followed","setFollowed","fetch","data","userInfo","doFollowClickHandler","ret","result","profileInfo","userFollowedCnt","cancelFollowClickHandler","green100","state","roomId","receiverId"],"sources":["/Users/singco/dev/projects/S07P12C104/client/src/components/Profile/ProfileButton.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\n\nimport colors from '../../constants/colors';\nimport Button from '../../components/Common/Button/Button';\nimport { useNavigate } from 'react-router-dom';\nimport { getUserInfo, doFollow, cancelFollow } from '../../api/user';\n\nconst ProfileButton = ({ userId, isFollowed, setProfileInfo }) => {\n\tconst navigate = useNavigate();\n\tconst [userid, setUserid] = useState('');\n\tconst [followed, setFollowed] = useState(isFollowed);\n\tuseEffect(() => {\n\t\tconst fetch = async () => {\n\t\t\tconst data = await getUserInfo();\n\t\t\tsetUserid(data.userInfo.userId);\n\t\t};\n\t\tfetch();\n\t}, []);\n\n\tconst doFollowClickHandler = async () => {\n\t\tconst ret = await doFollow();\n\t\tif (ret.result === 'success') {\n\t\t\tsetFollowed(!followed);\n\t\t\tsetProfileInfo(profileInfo => {\n\t\t\t\treturn { ...profileInfo, userFollowedCnt: profileInfo.userFollowedCnt + 1 };\n\t\t\t});\n\t\t}\n\t};\n\n\tconst cancelFollowClickHandler = async () => {\n\t\tconst ret = await cancelFollow();\n\t\tif (ret.result === 'success') {\n\t\t\tsetFollowed(!followed);\n\t\t\tsetProfileInfo(profileInfo => {\n\t\t\t\treturn { ...profileInfo, userFollowedCnt: profileInfo.userFollowedCnt - 1 };\n\t\t\t});\n\t\t}\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: row;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\tpadding: 14px;\n\t\t\t`}\n\t\t>\n\t\t\t{followed ? (\n\t\t\t\t<Button\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tpadding: 10px;\n\t\t\t\t\t\tmargin: 10px;\n\t\t\t\t\t\tborder: 2px solid ${colors.green100};\n\t\t\t\t\t\tborder-radius: 14px;\n\t\t\t\t\t\tbox-shadow: none;\n\t\t\t\t\t`}\n\t\t\t\t\ttype=\"active\"\n\t\t\t\t\tlabel=\"FOLLOW\"\n\t\t\t\t\tonClick={doFollowClickHandler}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<Button\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tpadding: 10px;\n\t\t\t\t\t\tmargin: 10px;\n\t\t\t\t\t\tborder: 2px solid ${colors.green100};\n\t\t\t\t\t\tborder-radius: 14px;\n\t\t\t\t\t\tbox-shadow: none;\n\t\t\t\t\t`}\n\t\t\t\t\ttype=\"outlined\"\n\t\t\t\t\tlabel=\"UNFOLLOW\"\n\t\t\t\t\tonClick={cancelFollowClickHandler}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t<Button\n\t\t\t\tcss={css`\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tpadding: 10px;\n\t\t\t\t\tmargin: 10px;\n\t\t\t\t\tborder: 2px solid ${colors.green100};\n\t\t\t\t\tborder-radius: 14px;\n\t\t\t\t\tbox-shadow: none;\n\t\t\t\t`}\n\t\t\t\ttype=\"outlined\"\n\t\t\t\tlabel=\"CHAT\"\n\t\t\t\tonClick={() =>\n\t\t\t\t\tnavigate('/chat/room', {\n\t\t\t\t\t\tstate: { roomId: null, receiverId: userId },\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default ProfileButton;\n"],"mappings":"gvBAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,sCACA,OAASC,GAAT,KAAoB,gBAApB,CAEA,MAAOC,OAAP,KAAmB,wBAAnB,CACA,MAAOC,OAAP,KAAmB,uCAAnB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,WAAT,CAAsBC,QAAtB,CAAgCC,YAAhC,KAAoD,gBAApD,C,0GAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,MAA4C,IAAzCC,OAAyC,MAAzCA,MAAyC,CAAjCC,UAAiC,MAAjCA,UAAiC,CAArBC,cAAqB,MAArBA,cAAqB,CACjE,GAAMC,SAAQ,CAAGR,WAAW,EAA5B,CACA,cAA4BL,QAAQ,CAAC,EAAD,CAApC,wCAAOc,MAAP,eAAeC,SAAf,eACA,eAAgCf,QAAQ,CAACW,UAAD,CAAxC,yCAAOK,QAAP,eAAiBC,WAAjB,eACAhB,SAAS,CAAC,UAAM,CACf,GAAMiB,MAAK,6FAAG,oKACMZ,YAAW,EADjB,QACPa,IADO,eAEbJ,SAAS,CAACI,IAAI,CAACC,QAAL,CAAcV,MAAf,CAAT,CAFa,sDAAH,kBAALQ,MAAK,2CAAX,CAIAA,KAAK,GACL,CANQ,CAMN,EANM,CAAT,CAQA,GAAMG,qBAAoB,6FAAG,yKACVd,SAAQ,EADE,QACtBe,GADsB,gBAE5B,GAAIA,GAAG,CAACC,MAAJ,GAAe,SAAnB,CAA8B,CAC7BN,WAAW,CAAC,CAACD,QAAF,CAAX,CACAJ,cAAc,CAAC,SAAAY,WAAW,CAAI,CAC7B,sCAAYA,WAAZ,MAAyBC,eAAe,CAAED,WAAW,CAACC,eAAZ,CAA8B,CAAxE,GACA,CAFa,CAAd,CAGA,CAP2B,wDAAH,kBAApBJ,qBAAoB,2CAA1B,CAUA,GAAMK,yBAAwB,6FAAG,yKACdlB,aAAY,EADE,QAC1Bc,GAD0B,gBAEhC,GAAIA,GAAG,CAACC,MAAJ,GAAe,SAAnB,CAA8B,CAC7BN,WAAW,CAAC,CAACD,QAAF,CAAX,CACAJ,cAAc,CAAC,SAAAY,WAAW,CAAI,CAC7B,sCAAYA,WAAZ,MAAyBC,eAAe,CAAED,WAAW,CAACC,eAAZ,CAA8B,CAAxE,GACA,CAFa,CAAd,CAGA,CAP+B,wDAAH,kBAAxBC,yBAAwB,2CAA9B,CAUA,MACC,cACC,GAAG,CAAExB,GAAF,uNADJ,WASEc,QAAQ,CACR,KAAC,MAAD,EACC,GAAG,CAAEd,GAAF,+UAMkBC,MAAM,CAACwB,QANzB,CADJ,CAWC,IAAI,CAAC,QAXN,CAYC,KAAK,CAAC,QAZP,CAaC,OAAO,CAAEN,oBAbV,EADQ,CAiBR,KAAC,MAAD,EACC,GAAG,CAAEnB,GAAF,+UAMkBC,MAAM,CAACwB,QANzB,CADJ,CAWC,IAAI,CAAC,UAXN,CAYC,KAAK,CAAC,UAZP,CAaC,OAAO,CAAED,wBAbV,EA1BF,CA2CC,KAAC,MAAD,EACC,GAAG,CAAExB,GAAF,6TAMkBC,MAAM,CAACwB,QANzB,CADJ,CAWC,IAAI,CAAC,UAXN,CAYC,KAAK,CAAC,MAZP,CAaC,OAAO,CAAE,yBACRd,SAAQ,CAAC,YAAD,CAAe,CACtBe,KAAK,CAAE,CAAEC,MAAM,CAAE,IAAV,CAAgBC,UAAU,CAAEpB,MAA5B,CADe,CAAf,CADA,EAbV,EA3CD,GADD,CAiEA,CAjGD,CAmGA,cAAeD,cAAf"},"metadata":{},"sourceType":"module"}